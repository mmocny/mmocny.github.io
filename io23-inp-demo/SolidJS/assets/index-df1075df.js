import{f as d,g as p,d as u,b as g,c as i,F as S,e as b,i as m,a as w,h as A,t as T}from"./index-25ceb0da.js";import{a as y,b as C,c as R,F as P,S as v,g as F}from"./SailboatPreview-03e7b9ec.js";function D(){const[n,e]=p();let s,r;const a=async o=>(r?.(),new Promise((t,l)=>{s=t,r=l,e(()=>{o()})}));return d(()=>{n()||(s?.(),s=void 0,r=void 0)}),[n,a]}function M(){const[n,e]=D(),[s,r]=u(new AbortController);return[n,async o=>{const t=new AbortController;try{await e(()=>{o(),r(t)})}catch(l){throw t.abort(),l}},()=>s().signal]}async function x(){return new Promise(n=>{const e=new MessageChannel;e.port1.onmessage=function(){n(void 0)},e.port2.postMessage(null)})}async function B(n,e,s){const r=[];if(e=="")return r;const a=performance.now();for(let o of n){if(await x(),s?.aborted)return performance.measure("Aborted: filterResults for: "+e,{start:a}),[];const t=o(e);r.push(...t)}return performance.measure("Computed: filterResults for: "+e,{start:a}),r.sort((o,t)=>o.score-t.score)}function I({searchTerm:n,sailData:e,abortSignal:s}){const[r]=g(()=>R(P,e),{initialValue:[]}),[a]=g(()=>[n(),s()],([t,l])=>B(r(),t,l)),o=()=>a()?.slice(0,10);return i(b,{get when(){return a().length>0},get children(){return[i(y,{get results(){return a()}}),i(S,{get each(){return o()},children:t=>i(C,{result:t})})]}})}const N=T("<main></main>",2);function j(){const[n]=g(F),[e,s,r]=M(),[a,o]=u(""),[t,l]=u(""),h=async c=>{const f=c.target.value;o(f),await s(()=>{l(f)})};return i(b,{get when(){return!n.loading},get children(){const c=N.cloneNode(!0);return m(c,i(v,{searchTerm:a,onInput:h}),null),m(c,i(w,{get children(){return i(I,{searchTerm:t,get sailData(){return n()},abortSignal:r})}}),null),d(()=>A(c,e()?"blurred":"")),c}})}export{j as default};

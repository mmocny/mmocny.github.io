import{f as d,g as b,d as u,b as g,c as i,h as S,F as p,e as m,i as w,a as A,j as T,t as y}from"./index-190af1ae.js";import{y as R,a as C,b as v,c as P,F,S as D,g as I}from"./SailboatPreview-c7fb2652.js";function j(){const[s,r]=b();let a,e;const n=async o=>(e?.(),new Promise((t,c)=>{a=t,e=c,r(()=>{o()})}));return d(()=>{s()||(a?.(),a=void 0,e=void 0)}),[s,n]}function x(){const[s,r]=j(),[a,e]=u(new AbortController);return[s,async o=>{const t=new AbortController;try{await r(()=>{o(),e(t)})}catch(c){throw t.abort(),c}},()=>a().signal]}async function B(s,r,a){const e=[];if(r=="")return e;const n=performance.now();try{for(let o of s){await R(),a?.throwIfAborted();const t=o(r);e.push(...t)}return performance.measure("Computed: filterResults for: "+r,{start:n}),e.sort((o,t)=>o.score-t.score)}catch{return performance.measure("Aborted: filterResults for: "+r,{start:n}),[]}}function M({searchTerm:s,sailData:r,abortSignal:a}){const[e]=g(()=>P(F,r)),[n]=g(()=>[s(),a()],([t,c])=>B(e(),t,c)),o=()=>n()?.slice(0,10);return i(m,{get when(){return S(()=>!n.loading)()&&n().length>0},get children(){return[i(C,{get results(){return n()}}),i(p,{get each(){return o()},children:t=>i(v,{result:t})})]}})}const N=y("<div></div>",2);function k(){const[s]=g(I),[r,a,e]=x(),[n,o]=u(""),[t,c]=u(""),h=async l=>{const f=l.target.value;o(f);try{await a(()=>{c(f)})}catch{}};return i(m,{get when(){return!s.loading},get children(){return[i(D,{searchTerm:n,onInput:h}),(()=>{const l=N.cloneNode(!0);return w(l,i(A,{get children(){return i(M,{searchTerm:t,get sailData(){return s()},abortSignal:e})}})),d(()=>T(l,r()?"blur-sm":"")),l})()]}})}export{k as default};
